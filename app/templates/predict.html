{% extends 'base.html' %}

{% block title %}
Machine Learning Model Forecast
{% endblock %}

{% block lead %}
리스트에 등록된 종목의 다음날 상승률을 예측합니다.<br>
예측은 ARIMA 회귀 모델을 통해 이루어집니다.
{% endblock %}

{% block main_body  %}
<form method="POST" action="/predict">
  <div class="form-group">
    <label for="exampleFormControlSelect1">Select the firm</label>
    <select name="target" class="form-control" id="exampleFormControlSelect1">
      {% for each in watchlist %}
      <option value={{each.ticker}}>{{each.name}}</option>
      {% endfor %}
    </select>
  </div>
  <input type="submit" class="btn btn-primary" value="Predict" />
</form>

{% if forecast %}
<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Date</th>
      <th scope="col">Company Name</th>
      <th scope="col">Forecast Result</th>
    </tr>
  </thead>
  <tbody>
    <tr class = {{ color }}>
      <td> {{ forecast[0] }} </td>
      <td> {{ forecast[1] }} </td>
      <td> {{ forecast[2] }}% </td>
    </tr> 
{% endif %}

{% if recommend %}
<table class="table table-hover">
    <thead>
      <tr>
        <th scope="col">Date</th>
        <th scope="col">Firm</th>
        <th scope="col">To grade</th>
      </tr>
    </thead>
    <tbody>
      {% for each in recommend %}
      <tr>
        <td>{{ each[0] }}</th>
        <td>{{ each[1][0] }}</td>
        <td>{{ each[1][1] }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endif %}
{% endblock  %}
